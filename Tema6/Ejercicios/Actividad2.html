<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Actividad Tema 6</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script>
        class Usuario {
           #usuarios = [
            {user: 'David', pass: 'Aa123456'},
            {user: 'Pepe', pass: 'Bb123456'},
            {user: 'Juan', pass: 'Cc123456'}
           ];
            constructor() {
                this.user = document.getElementById("user");
                this.pass = document.getElementById("pass");
                this.boton = document.getElementById("boton");
                if (this.user && this.pass && this.boton) {
                    this.inicializarEventos();
                }
            }

            validarUsuario(event){
                // event.preventDefault();
                let usuarioEncontrado = this.#usuarios.find((usuario) => usuario.user === this.user.value && usuario.pass === this.pass.value);
                if(usuarioEncontrado){
                    alert("Se ha iniciado sesión");
                }else{
                    alert("Usuario o contraseña incorrecta");
                    event.preventDefault();
                }
            }

            validarPass() {
                if (this.pass.validity.patternMismatch) {
                    this.pass.setCustomValidity("La contraseña debe contener mínimo 8 caracteres, incluidos una mayúscula, una minúscula y un número.");
                } else {
                    this.pass.setCustomValidity("");
                }
            }


            inicializarEventos() {
                this.pass.addEventListener("keyup", this.validarPass.bind(this));
                this.boton.addEventListener("click", this.validarUsuario.bind(this));
        }
    }

        window.onload = function () {
            new Usuario();
        };
    </script>
</head>

<body>
    <h2>Inicio Sesión</h2>
    <br>
    <br>
    <style>
        input:invalid {
            border: 2px solid red;
        }

        input:valid {
            border: 2px solid green;
        }
    </style>

    <form id="form" action="Actividad2.html">
        <div class="mb-3">
            <div class="input-group">
                <span class="input-group-text" id="basic-addon3">Usuario</span>
                <input type="text" class="form-control" id="user" name="user" required>
                <span class="input-group-text" id="basic-addon3">Contraseña</span>
                <input type="text" class="form-control" id="pass" name="pass" pattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[A-Za-z\d]{8,}$" required>
            </div>
            <br>
            <br>
        </div>
            <button id="boton" type="submit" class="btn btn-primary">Iniciar Sesión</button>
    </form>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

</body>

</html>